# 220327(일)

# 오늘 공부한 것

- 패스트 캠퍼스 The Red 견고한 UI 설계를 위한 마크업 가이드

# 기억해야 할 것

## CLS (Cumulative Layout Shift)

- 누적 배치 변경
- 첫 페인팅 이후 뷰포트 안에서 배치가 바뀌는 상황

### CLS 발생 사례

1. 이미지, 배너 등의 뒤늦게 나타나면서 레이아웃이 변경되는 경우
2. DOM 요소 추가시 레이아웃이 변경되는 경우 등등
3. FOIT / FOUT (글꼴 스와핑)

### CLS 유발 요인

1. 치수를 알 수 없는 이미지 로딩
2. 동적으로 추가된 DOM
3. 웹 폰트 swap 페인팅

### CLS 문제 해결

1. 동적으로 추가하는 콘텐츠에 자리 표시자 제공
   - 동적으로 추가될 콘텐츠 자리에는 자리 표시자를 이용하여 미리 콘텐츠가 추가될 자리를 잡아둔다.
   - `min-height` 값을 미리 적용해 두고 추가적으로 배경색도 넣어줄 수 있다. (like 스켈레톤 UI)
2. 이미지 / 영상 요소에 비율 힌트 제공
   - `img` 요소에 구체적으로 width, height 값을 넣어준다. `<img src=’test.jpg’ width: ‘800’ height=’1600’>`
     웹이 이 값을 보고 비율을 잡게 된다.
   - 지정한 크기로 렌더링 되지 않아도 상관없으니 비율을 정해주는것이 좋다.
   - 주로 CSS에 추가적으로 `max-width: 100%, height: auto` 값을 넣어 사용한다.
3. 웹 폰트와 비슷한 스타일의 대체 폰트 지정하기
   - 시스템 대체 폰트들을 많이 보고 비교해봐야함
4. 애니메이션 적용 시 transform 사용

## 웹 접근성

- 많은 글로벌 기업들이 웹 접근성이 개선되면 사용자 경험도 더 좋아지기 때문에 웹 접근성에 관심을 가지고 개선하려고 노력하고 있다.

### 대체 텍스트

**텍스트 아닌 콘텐츠는 그 의미가 용도를 인식할 수 있도록 대체 텍스트를 제공해야 한다.**

- 장식 목적 이미지 (스타일용 이미지)에는 대체 텍스트를 사용하지 않는것을 권장한다.
- 주변 문맥을 통해 내용을 충분히 설명하고 있는 경우 대체 텍스트 불필요. (중복된 설명은 오히려 UX에 안좋다)

> 위 두 경우일 경우 `<img src='img.png' alt>` 처럼 그냥 alt 속성만 쓰고 내용은 비워둔다.

- IR 기법 (Image Replacement)
- CSS 배경 이미지에 의미가 포함된 경우 img태그를 사용하지 않기 때문에 대체텍스트를 쓸 수 없다.
  이때 html요소에 텍스트를 작성한뒤 position 과 opacity값을 통해 숨겨준다.

```css
.ally {
 position: absolute;
 opacity: 0;
}

// 아래처럼 요소를 숨기면 보조 공학기기가 이 요소들은 무시함
// => 화면 낭독기에 전달이 되지 않음 => 대체텍스트 제공 X
display: none;
visibility : hidden;
width | height: 0;
font-size: 0;
```

### 반복 영역 건너뛰기

**콘텐츠의 반복되는 영역은 건너뛸 수 있어야 한다.**

- 키보드를 이용하여 웹에 접근할때 제공되는 것으로 중복되는 메뉴들을 건너 뛸수 있는 기능을 제공해준다.
- 평소에는 보이지 않다고 tab키로 이동하다 요소가 focus될때 영역을 건너뛸수 있는 요소를 보여준다.
- [참고 링크](https://nuli.navercorp.com/guideline/s02/g14)

### 표의 구성

**화면에 전달하는 정보, 구조, 관계는 텍스트로 변환하거나 기계가 인식할 수 있어야 한다.**

**표는 이해하기 쉽게 구성해야 한다.**

- `caption` 요소를 사용하여 표에 제목을 지정한다.
- `th` 를 사용하여 제목(헤더) 셀을 지정한다. 이때 scope 속성을 통해 행을 설명하는지 열을 설명하는지 정의해 준다. (`scope='col' || 'row'`)

### 레이블 제공

**사용자 입력에는 대응하는 레이블 또는 설명을 제공해야 한다.**

- `value, placeholder`속성은 `input`을 설명하기에 적절한 속성이 아니다.
- 따라서 `label`을 사용하여 `input`가 연결해줘야 한다.
  만약 `label`을 보여주고 싶지 않은 상황이라면 `aria-label`속성을 사용할 수 있다. 즉, aria-label 값은 화면에 노출되지 않는다.

```html
<input id="ID" />
<label for="ID">아이디</label>

<input aria-label="아이디" />
```

### 자막 제공

**녹음된 음성 콘텐츠에 동기화된 자막을 제공해야 한다. 단, 미디어가 문자를 대체하기 위한 설명일 경우 예외**

**멀티미디어 콘텐츠에는 자막, 대본 또는 수화를 제공해야 한다.**

- 실시간 콘텐츠에는 X (사실상 거의 불가능)
- `track`을 통해서 자막을 제공할 수 있다.

```html
<video>
  <source src="test.mp4" srclang="en" type="video/mp4" />
  <track src="test.vtt" kind="captions" srclang="en" label="English" />
</video>
```

- 한국에서는 자막을 제공하기 어려운 경우 대본이나 수어로 대체하여 제공하는 것을 허용한다.

### 제목 제공

**웹 페이지는 주제나 목적을 설명하는 제목이 있어야 하며, 제목과 레이블은 주제 또는 목적을 설명해야 한다.**

- 접근성뿐만아니라 검색엔진에도 영향을 미치는 중요한 부분이다.
- `title`에 공통적인 제목, 특수문자를 사용하는 것은 좋지 않다.
- 다른 페이지와 중복 없는 고유한 제목을 작성하는 것이 바람직하다.
- `h*`요소도 내용에 알맞게 작성하는 것이 좋다.
  화면 낭독기는 해딩 요소들을 모아서 정보를 제공하는 기능이 있기 때문
- `iframe` 요소에 제목을 넣을때에는 `aria-label` 속성을 이용한다. `<iframe src='*.html' aria-label='예시 자료'><iframe>`

### 정지 기능 제공

**콘텐츠에 시간 제한이 설정되어 있다면 최소한 다음 중 하나를 만족해야 한다. 끄기, 조절, 연장**

**자동으로 변경되는 콘텐츠는 움직임을 제어할 수 있어야 한다.**

- swiper 같이 자동으로 움직이는 콘텐츠들의 내용을 파악하는데 어렴우이 있을 수 있다. 따라서 콘텐츠의 움직임을 멈출 수 있는 정지 기능을 제공해야 한다.
- 꼭 버튼 형태로 정지를 구현할 필요는 없고 정지 기능을 제공하면 된다. (ex. 요소에 focus 되면 정지 등등)

### 키보드 사용 보장

**모든 기능은 키보드만으로도 사용할 수 있어야 한다.**

- 만약 마우스로 어떤 동작을 구현했다면 키보드로도 같은 동작을 실행할 수 있도록 해야한다. (메뉴 호버시 서브메뉴 보임 ⇒ 메뉴 포커스시 서브메뉴 보임)
- 장치 독립적 이벤트 핸들러 [링크](https://webaim.org/techniques/javascript/eventhandlers#deviceindependent)
  키보드와 마우스의 동등한 사용을 보장하는 이벤트 핸들러
  ex. onblur, onchange, onclick, onfocus, oninput, onselect

### 초점 이동

**키보드에 의한 초점은 논리적으로 이동해야 하며 시각적으로 구별할 수 있어야 한다.**

- TAB키 만을 이용하여 요소들을 이동할 수 있어야하고 이때 순서가 논리적이어야 한다. (EX. 로그인시 ID ⇒ PW ⇒ Log in 순으로)

### 텍스트 컨텐츠의 명도 대비

**텍스트 콘텐츠와 배경 간의 명도 대비는 4.5대 1이상이어야 한다.**

- 배경색과 글자색의 명도 대비가 어느정도 있어야 한다. (노인, 약시 시각장애인 들을 위하여 ++ 가독성)
- 색상에 따라 접근성이 괜찮은 색상 알려주는 사이트 [링크](https://learnui.design/tools/accessible-color-generator.html)

### 기본 언어 표시

**모든 웹페이지의 기본 언어는 기계적으로 판단할 수 있어야 한다.**

- `html`의 `lang` 속성으로 명시해주어야 한다. (하지만 구글에서는 이 속성을 참고하지 않는다. 왜냐하면 많은 사람들이 기본값인 en을 사용해버렸기 때문에 의미가 오염되었다.)
  그럼에도 접근성 측면에서는 중요하다.

### 오류 정정

**만약 입력 오류가 자동으로 감지되면 오류 항목을 식별하고 사용자에게 문자로 알려야 한다. 그리고 의견을 제공해야 한다.**

- 이메일 입력란에서 잘못된 형식인 경우 안내 문구를 보여줌

# 정리

오늘은 CLS 와 웹 접근성 관련 강의를 봤다. 회사에서 작업할때 CLS 점수가 높게 나오는 상황이 있었는데 폰트때문에 발생하는 거라 어쩔 수 없는 것으로 생각했었는데 기본폰트도 잘 골라서 적용하면 CLS를 더 줄일 수 있다는 사실을 알게 되어 한번 여러 폰트를 적용해보고 CLS를 줄여볼 계획이다.

또한 웹 접근성에 대해 자세히 배웠는데 내가 제작한 페이지에도 많은 부분이 부족하다는 점을 느낀 시간이었다. 어려운 내용이라기보단 꼼꼼하게 신경써야할 내용이기 때문에 앞으로 페이지를 제작할때 한번 더 고려해보고 마크업을 해야겠다고 생각했다.
