# 220408(금)

# 오늘 공부한 것

- CS 공부 (트랜잭션)

# 기억해야 할 것

## 트랜잭션(Transaction)이란?

- 트랜잭션은 **데이터베이스의 상태를 변화시키기 위한 작업 수행의 논리적 단위** 또는 한꺼번에 모두 수행되어야 할 일련의 연산을 의미한다.
- 트랜잭션은 Commit (저장) 되거나 Rollback (철회) 될 수 있다.

## 트랜잭션의 성질 (ACID)

### 원자성(Atomicity)

- 트랜잭션 연산이 DB에 모두 반영되거나 아무것도 반영되지 않아야 한다.
- 즉, 완전한 수행이 아니면 트랜잭션 전부가 취소 된다. (All or Nothing)

### 일관성(Consistency)

- 트랜잭션의 처리하고 난 뒤의 DB 상태는 항상 일관되어야 한다.

### 격리성, 독립성(Isolation)

- 각각의 트랜잭션은 서로 간섭 없이 독립적으로 수행되어야 한다.
- 따라서 어떤 연산도 트랜잭션의 중간 단계 데이터를 볼 수 없다.

### 지속성(Durability)

- 트랜잭션이 성공적으로 완료되면 영구적으로 결과에 반영되어야 한다.
- 시스템에 문제가 발생하더라도 유지되어야 한다.
- 이 성질을 통해 트랜잭션이 남긴 로그를 보고 시스템 장애 발생시 장애 발생 전 상태로 되돌릴 수 있다.

## 트랜잭션 격리수준(Isolation level)

- 트랜잭션의 격리성 성질때문에 동시 처리 능력이 매우 떨어진다.
  이 문제를 해결하기 위해 격리성 수준을 여러 단계로 나누었다.

### READ UNCOMMITED

- 트랜잭션의 변경내용을 완료되지 않아도 (Commit되지 않아도) 데이터에 접근이 가능하다.
- Commit되지 않은 데이터를 조회하는 것을 **Dirty Read**라 하며 데이터 정합성(데이터 값이 각각 일치함) 문제가 발생할 수 있다.

### READ COMMITED

- 변경 내용이 Commit 되어야한 다른 트랜잭션에서 데이터 조회가 가능하다.
- 온라인 서비스에서 가장 많이 사용되는 격리 수준이다.

### REPEATABLE READ

- 트랜잭션이 시작되기 전에 커밋한 내용에 대해서만 조회가 가능하다.

### SERIALIZABLE

- 가장 엄격한 수준의 격리성, 따라서 동시성 처리에 매우 약하다.
- 성능저하가 발생한다.

## 트랜잭션의 상태

- Active : 트랜잭션이 실행 중인 상태
- Failed : 트랜잭션이 중단된 상태
- Aborted : 트랜잭션 Rollback이 수행된 상태
- Partially Committed : 트랜잭션 연산이 마지막까지 실행되어 Commit 직전인 상태
- Committed : 트랜잭션이 성공적으로 종료되어 Commit을 실행한 후의 상태
