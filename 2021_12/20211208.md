# 211208(수)

# 오늘 공부한 것

- 리액트 과제

# 기억해야 할 것

### setState 극복하기

- useState 훅을 사용할때 set함수를 등록하여 state값을 변경할 수 있다.
- 하지만 이 변경값이 바로 state에 적용이 되지 않고 어느정도 시간이 흐른뒤 적용이된다.  
  (이는 리액트의 처리 과정에 따라 시기가 유동적으로 정해지기 때문이라고 들은 기억이 있다.)
- 이런 문제로 인해 나는 이번 과제에서 API를 호출할때 즉각적으로 변한(즉, set한) 데이터를 넣어 보냈지만 방금 set한 state값이 전달되는 것이 아닌 이전 state값이 API에 전달되어 호출되는 문제가 발생하였다.
- 이를 극복하기 나는 API호출시 state값을 넣어주는것이 아닌 setState를 할때 넣어주던 변수로 직접 API를 호출하였다. 이렇게 하면 잘 작동은 하지만 이러면 state를 왜 쓰지 하는 생각이 들었다.
- 그래서 강사님께 질문한 결과 useEffect를 이용하여 해결하는 방법을 알게되었다.
- useEffect가 state값을 바라보게하고 그 useEffect안에서 API를 호출하면 이제 state가 다 바뀐 후에 API가 호출되는 것이기 때문에 지금까지 발생했던 문제를 해결할 수 있었고 다시금 useState가 제 역할을 할 수 있었다.

# 정리

과제만 하다보니 시간이 뚝.딱이다. 리액트쪽 구현은 이제 어느정도 가능한데 (위 문제처럼 문제가 발생하긴 하지만 어뜩케든 비효율적이라도 기능구현은 해내긴한다) 서버쪽은 진짜 뭐가 뭔지 몰라서 이전 코드도 보고 네이버 API문서도 보고 해도 구현하는데 정말 오랜 시간이 걸렸고 구현하고도 데이터를 보내고 받는법을 깨닫는데도 꽤나 오래걸렸다. 그래도 한 케이스를 구현하고 나니 그 다음 케이스를 구현하는건 상대적으로 금방 끝낼 수 있었다.

물론 지금 server쪽 구현 코드가 깔끔하게 보이진 않지만.. (무수한 flat과 filter, console.log) 일단 기능을 한다는것에 만족하고 있다. 아직 request, express가 익숙하지않아서 발생하는 문제인것 같아서.. Node.js도 해야 될 것 같은 이 느낌.. 뭐 하나 얼추할줄 알게되면 또 다른 뭐 하나가 나오는 이 개발의 세계 정말이지 늘 새롭다.
